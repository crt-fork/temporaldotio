Careers.title = "Careers | Temporal";
Careers.description =
  "Come work with us. Weâ€™re on a mission to change the way we build applications. We want you to be a part of this journey.";
// {
//   hostedUrl: "",
//   id: "",
//   location: "",
//   team: "",
//   text: "",
// },
const FriendJobs = {
  Airbyte: [
    {
      hostedUrl:
        "https://jobs.lever.co/airbyte/11d4a6fe-a27e-4a1c-ac6c-7b7fe2b2a0fb",
      id: "",
      location: "Remote",
      team: "",
      text: "Senior Software Engineer, Platform",
    },
  ],
  Atomic: [
    {
      hostedUrl: "https://boards.greenhouse.io/atomicvest/jobs/4037964004",
      id: "",
      location: "San Francisco, Remote",
      team: "",
      text: "Senior Software Engineer, Backend",
    },
  ],
  Bolt: [
    {
      hostedUrl:
        "https://www.bolt.com/careers/software-engineer-platforms/f193e0fa-7cf0-42aa-8837-8bdd4dca3e22/",
      id: "",
      location: "San Francisco",
      team: "",
      text: "Software Engineer",
    },
    {
      hostedUrl:
        "https://www.bolt.com/careers/senior-software-engineer-platforms/ce0d1fe3-bb00-4b4a-99f0-848bbc5a87c3/",
      id: "",
      location: "San Francisco",
      team: "",
      text: "Senior Software Engineer - Platforms",
    },
  ],
  Datadog: [
    {
      hostedUrl: "https://www.datadoghq.com/careers/detail/?gh_jid=1825853",
      id: "",
      location: "New York, Paris, Remote",
      team: "",
      text: "Software Engineer - Site Reliability",
    },
  ],
  Descript: [
    {
      hostedUrl:
        "https://boards.greenhouse.io/descript/jobs/4310029003?gh_jid=4310029003",
      id: "",
      location: "San Francisco, Montreal, Remote",
      team: "",
      text: "Senior Software Engineer",
    },
  ],
  Fronted: [
    {
      hostedUrl:
        "https://docs.google.com/document/d/1muUEnuSSROdKR8QMxOe1V-Y9qBTCCrifOV3jcr3835c",
      id: "",
      location: "London",
      team: "",
      text: "Backend Engineer",
    },
  ],
  Indent: [
    {
      hostedUrl: "https://indent.com/jobs/staff-engineer-backend",
      id: "",
      location: "San Francisco, Remote",
      team: "",
      text: "Staff Engineer, Backend",
    },
    {
      hostedUrl: "https://indent.com/jobs/senior-engineer-backend",
      id: "",
      location: "San Francisco, Remote",
      team: "",
      text: "Senior Engineer, Backend",
    },
  ],
  MachSchip: [
    {
      hostedUrl:
        "https://www.golangprojects.com/golang-go-job-ezv-Remote-Senior-Golang-Developer-Melbourne-MachShip-remotework.html",
      id: "",
      location: "Melbourne, Remote",
      team: "",
      text: "Senior Golang Developer",
    },
  ],
  Nylas: [
    {
      hostedUrl:
        "https://ats.comparably.com/api/v1/lvr/nylas/581530b3-f77a-497c-a9a5-656ec9628847",
      id: "",
      location: "Toronto",
      team: "",
      text: "Senior Software Engineer (Workflows)",
    },
    {
      hostedUrl:
        "https://ats.comparably.com/api/v1/lvr/nylas/c5e19918-ecd3-4c51-a184-8f8d97b1337b",
      id: "",
      location: "Remote US",
      team: "",
      text: "Senior Software Engineer (Workflows)",
    },
  ],
  "Nightfall AI": [
    {
      hostedUrl:
        "https://jobs.lever.co/nightfall/2284505f-49e4-48b6-a530-4e1869a68fe4",
      id: "",
      location: "US & Canada Remote",
      team: "",
      text: "Senior Backend Engineer",
    },
  ],
  Outreach: [
    {
      hostedUrl:
        "https://jobs.lever.co/outreach/b7069d4d-5fc4-4b4b-a70f-5fd676818cae",
      id: "",
      location: "Seattle, WA",
      team: "",
      text: "Staff Software Engineer, Orchestration Services",
    },
  ],
  "Cash App - Square": [
    {
      hostedUrl:
        "https://www.linkedin.com/jobs/view/senior-software-engineer-cloud-database-infra-cash-app-at-cash-app-2315548952/",
      id: "",
      location: "US Remote",
      team: "",
      text: "Senior Software Engineer (Cloud Database Infra)",
    },
  ],
  "SS & C Technologies": [
    {
      hostedUrl:
        "https://wd1.myworkdaysite.com/en-US/recruiting/ssctech/SSCTechnologies/job/Denver-CO/Staff-Software-Engineer---Private-Cloud_R3140",
      id: "",
      location: "Denver, US Remote",
      team: "",
      text: "Staff Software Engineer - Private Cloud",
    },
  ],
  Stripe: [
    {
      hostedUrl:
        "https://stripe.com/jobs/listing/infrastructure-engineer-developer-productivity-workflow-engine/2964407",
      id: "",
      location: "North America Remote",
      team: "",
      text: "Infrastructure Engineer, Developer Productivity (Workflow Engine)",
    },
  ],
  Snap: [
    {
      hostedUrl:
        "https://eng.snap.com/build_a_reliable_system_in_a_microservices_world_at_snap",
      id: "",
      location: "Los Angeles, London, Israel",
      team: "",
      text: "General Engineering Hires",
    },
  ],
  Sureify: [
    {
      hostedUrl: "https://apply.workable.com/sureify-1/j/EAF36BA284/ ",
      id: "",
      location: "San Jose",
      team: "",
      text: "Staff Software Engineer",
    },
    {
      hostedUrl: "https://apply.workable.com/sureify-1/j/8C8F075725/",
      id: "",
      location: "San Jose",
      team: "",
      text: "Senior Software Engineer",
    },
  ],
  "Well Health": [
    {
      hostedUrl:
        "https://temporal.io/careers#:~:text=Senior%20Software%20Engineer%20(Backend)",
      id: "",
      location: "Remote anywhere",
      team: "",
      text: "Senior Software Engineer (Backend)",
    },
  ],
  Wellhive: [
    {
      hostedUrl:
        "https://boards.greenhouse.io/wellhealthinc/jobs/5550724002?source=incluzion",
      id: "",
      location: "US Remote",
      team: "",
      text: "Software Engineer - Integrations",
    },
  ],
};
export default function Careers({ allJobs }) {
  return (
    <div>
      <section className="max-w-screen-lg px-8 p-10 mx-auto">
        <div className="text-center">
          <h1 className="text-2xl md:text-5xl  mt-12 leading-lg sm:text-4xl sm:leading-4xl md:font-bold mb-4">
            Careers at Temporal
          </h1>
          <h2 className="text-xl md:text-2xl">
            Help us deliver a new way to build scalable and reliable
            applications!
          </h2>
        </div>
        <div className="mt-24">
          <div>
            {Object.entries(allJobs).map(([team, jobs]) => {
              return (
                <div key={team} className="mb-10">
                  <h3 className="mb-5 text-4xl font-semibold tracking-wide">
                    {team}
                  </h3>
                  <div className="space-y-3">
                    {jobs.map((job) => (
                      <a
                        href={job.hostedUrl}
                        className="p-5 rounded-lg grid grid-cols-1 md:grid-cols-4 gap-3 hover:bg-gray-100"
                        key={job.hostedUrl}
                        target="_blank"
                      >
                        <p className="col-span-3 text-xl mr-5">{job.text}</p>
                        <p className="col-span-1 flex items-center text-md space-x-2">
                          <svg
                            className="w-5 h-5"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              fillRule="evenodd"
                              d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                              clipRule="evenodd"
                            />
                          </svg>
                          <span>{job.location}</span>
                        </p>
                      </a>
                    ))}
                  </div>
                </div>
              );
            })}
          </div>

          <h2 className="text-xl">
            If none of these positions are a fit for you, email{" "}
            <a href="mailto:careers@temporal.io" className="underline">
              careers@temporal.io
            </a>{" "}
            describing your dream job.
          </h2>

          <h2 className="text-2xl md:text-5xl  mt-12 leading-lg sm:text-4xl sm:leading-4xl md:font-bold mb-10">
            Check out these job postings from our friends.
          </h2>

          <div>
            {Object.entries(FriendJobs).map(([team, jobs]) => {
              console.log(team, jobs);
              return (
                <div className="space-y-3">
                  {jobs.map((job) => (
                    <a
                      href={job.hostedUrl}
                      className="p-5 rounded-lg grid grid-cols-1 md:grid-cols-4 gap-3 hover:bg-gray-100"
                      key={job.hostedUrl}
                      target="_blank"
                    >
                      <p className="col-span-3 text-xl mr-5">
                        {team} - {job.text}
                      </p>
                      <p className="col-span-1 flex items-center text-md space-x-2">
                        <svg
                          className="w-5 h-5"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            fillRule="evenodd"
                            d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                            clipRule="evenodd"
                          />
                        </svg>
                        <span>{job.location}</span>
                      </p>
                    </a>
                  ))}
                </div>
              );
            })}
          </div>
        </div>
      </section>
    </div>
  );
}

export const getStaticProps = async () => {
  const LEVER_API_URL = "https://api.lever.co/v0/postings/temporal?mode=json";

  const getJobPostings = async (url) => {
    const res = await fetch(url);
    return res.json();
  };

  const res = await getJobPostings(LEVER_API_URL);

  const groupByKey = (list, key) =>
    list.reduce(
      (hash, obj) => ({
        ...hash,
        [obj[key]]: (hash[obj[key]] || []).concat(obj),
      }),
      {}
    );

  const allJobs = res.map(({ text, hostedUrl, categories, id }) => {
    return {
      team: categories.team,
      location: categories.location,
      text,
      hostedUrl,
      id,
    };
  });

  return {
    props: {
      allJobs: groupByKey(allJobs, "team"),
    },
    revalidate: 60,
  };
};
